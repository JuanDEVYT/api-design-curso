:root{
  --bg:#f3f6f8;
  --card:#ffffff;
  --muted:#6b7280;
  --accent:#0aa2ff;
  --glass: rgba(255,255,255,0.6);
  --shadow: 0 6px 18px rgba(16,24,40,0.06);
  --radius:14px;
  --gap:12px;
  color-scheme: light;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

:root[data-theme="dark"]{
  --bg:#0b1220;
  --card:#0f1724;
  --muted:#94a3b8;
  --accent:#4dd0e1;
  --glass: rgba(255,255,255,0.03);
  --shadow: 0 8px 24px rgba(2,6,23,0.6);
  color-scheme: dark;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: linear-gradient(180deg,var(--bg), rgba(0,0,0,0)) fixed;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  display:flex;
  align-items:stretch;
  justify-content:center;
  padding:18px;
}

.app{
  width:100%;
  max-width:760px;
  background: transparent;
  height:100vh;
  display:flex;
  flex-direction:column;
  gap:12px;
  position:relative;
}

/* Topbar */
.topbar{
  height:56px;
  display:flex;
  gap:10px;
  align-items:center;
  padding:6px;
  background: linear-gradient(180deg,var(--glass), rgba(255,255,255,0.03));
  border-radius:12px;
  box-shadow:var(--shadow);
  backdrop-filter: blur(8px);
}
.icon-btn{
  width:44px;
  height:44px;
  border-radius:10px;
  border:0;
  background:transparent;
  display:inline-grid;
  place-items:center;
  color:var(--muted);
}
.titlewrap{flex:1; overflow:hidden}
.title{font-weight:600; font-size:15px; color:var(--card) ; color:inherit; color:var(--muted); font-size:15px}
.subtitle{font-size:12px; color:var(--muted); opacity:0.9}

/* Main */
.main{
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:0;
  flex:1;
  min-height:0;
  overflow:hidden;
  /* ensure content doesn't get covered by the bottom nav / sheet */
  padding-bottom:92px;
  /* remove any top spacing so lessons can occupy the top content area */
  padding-top:0;
}

.card{
  background: linear-gradient(180deg, var(--card), transparent);
  border-radius:var(--radius);
  padding:12px;
  box-shadow:var(--shadow);
  backdrop-filter: blur(6px);
}

/* Course hero */
.course-card .course-hero{
  display:flex;
  gap:12px;
  align-items:center;
}
.hero-graphic{width:120px; height:72px; flex:0 0 120px; border-radius:10px; overflow:hidden; box-shadow: 0 6px 18px rgba(0,0,0,0.06)}
.course-info{flex:1; min-width:0}
.course-title{font-weight:700; font-size:15px; margin-bottom:6px; color:var(--muted)}
.course-meta{font-size:12px; color:var(--muted)}
.progress{margin-top:10px}
.progress-bar{height:8px; background:rgba(0,0,0,0.06); border-radius:8px; overflow:hidden}
.progress-bar span{display:block; height:100%; background:linear-gradient(90deg, var(--accent), #7bdff5); border-radius:8px}
.progress-text{font-size:12px; color:var(--muted); margin-top:6px}

/* actions */
.card-actions{display:flex; gap:10px; margin-top:12px}
.primary{
  background:linear-gradient(180deg,var(--accent), #008ecc);
  border:0;
  color:white;
  padding:10px 14px;
  border-radius:10px;
  font-weight:600;
  flex:1;
}
.ghost{
  background:transparent;
  border:1px solid rgba(0,0,0,0.06);
  color:var(--muted);
  padding:10px 12px;
  border-radius:10px;
  min-width:120px;
}

/* Lessons list */
.lessons-card .section-header{margin-bottom:8px}
.section-title{font-weight:700; font-size:14px}
.section-sub{font-size:12px; color:var(--muted)}
.lessons-list{display:flex; flex-direction:column; gap:10px; max-height:36vh; overflow:auto; padding-right:6px}
.lesson{
  display:flex;
  gap:10px;
  align-items:center;
  padding:10px;
  border-radius:10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  border:1px solid rgba(0,0,0,0.03);
}
.lesson .thumb{
  width:56px;
  height:40px;
  border-radius:8px;
  background: linear-gradient(90deg,#ffd89b,#19547b);
  flex:0 0 56px;
  display:grid;
  place-items:center;
  color:white;
  font-weight:700;
  font-size:14px;
}
.lesson .meta{flex:1; min-width:0}
.lesson .meta .name{font-weight:600; font-size:13px; color:var(--muted)}
.lesson .meta .desc{font-size:12px; color:var(--muted)}
.lesson .time{font-size:12px; color:var(--muted); margin-left:8px}



/* sheet removed â€” views handled inline */

/* Lessons card sits in normal document flow below the course card so it doesn't overlap. */
.lessons-card{
  /* switched from absolute positioning to normal flow */
  border-radius: 14px;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 1;
  background: linear-gradient(180deg, var(--card), transparent);
  box-shadow: var(--shadow);
  padding: 12px;
  margin-top: 0; /* ensure it sits directly after the previous card */
  max-height: calc(100vh - 240px); /* keep reasonable height on small screens */
}

/* small screens ensure touch targets */
@media (max-width:420px){
  body{padding:10px}
  .hero-graphic{width:96px}
  .course-card{padding:10px}
  .primary, .ghost{padding:10px}
  .lessons-list{max-height:30vh}
}

/* Splash screen styles */
.splash{
  position:fixed;
  inset:0;
  display:grid;
  place-items:center;
  /* stronger opaque background so underlying UI is not visible */
  background: rgba(4,8,16,0.95);
  z-index:120;
}
.splash-card{
  width:min(92%,420px);
  /* higher contrast card that reads clearly on dark backdrop */
  background: rgba(255,255,255,0.04);
  border-radius:16px;
  padding:20px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
  transform:translateY(8px);
  opacity:0;
}
.splash-title{
  font-weight:800;
  letter-spacing:2px;
  font-size:18px;
  color: #ffffff;
  text-align:center;
}
.splash-by{font-size:13px;color:rgba(255,255,255,0.9);opacity:0.95}

/* loader */
.splash-loader{display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:6px}
.spinner{transform-origin:center;opacity:0.95}
.spinner-seg{transform-origin:center;stroke-dasharray:90;stroke-dashoffset:60;animation:spinSeg 1s linear infinite}
@keyframes spinSeg{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.splash-loading-text{font-size:13px;color:rgba(255,255,255,0.9)}

/* progress bar and skip button */
.splash-bar{width:80%;height:8px;background:rgba(255,255,255,0.04);border-radius:20px;overflow:hidden;margin-top:6px}
.splash-bar span{display:block;height:100%;width:0;background:linear-gradient(90deg, var(--accent), #7bdff5);border-radius:20px;animation:barMove 1.4s ease-in-out forwards}

/* skip button tweak */
#splashSkip{background:transparent;border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.95);min-height:40px}

/* entrance/exit animations (fluent-like) */
@keyframes splashIn {
  from{opacity:0;transform:translateY(14px) scale(.98)}
  to{opacity:1;transform:translateY(0) scale(1)}
}
@keyframes splashOut {
  from{opacity:1;transform:translateY(0) scale(1)}
  to{opacity:0;transform:translateY(-8px) scale(.98)}
}
@keyframes barMove {
  0%{width:0%}
  40%{width:60%}
  100%{width:100%}
}
.splash-in .splash-card{animation: splashIn 420ms cubic-bezier(.2,.9,.2,1) both}
.splash-out .splash-card{animation: splashOut 360ms cubic-bezier(.2,.9,.2,1) both}

/* small tweak for dark mode splash */
:root[data-theme="dark"] .splash-card{background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));}